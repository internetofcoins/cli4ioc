exports.alert=makeAlert;exports.make=makeModal;exports.input=makeInput;exports.destroy=destroyModal;function makeAlert(title,content,button){var modalactive=typeof UI.modal.isvisible!="undefined"&&UI.modal.isvisible?true:false;if(!modalactive){UI.modal.show();UI.modal.setFront();UI.modal.enableMouse()}if(typeof UI.modal.box!="undefined"){UI.modal.box.hide()}UI.modal.alert=blessed.message({parent:UI.box,top:"center",left:"center",width:40,height:8,padding:{left:1,right:1},align:"center",label:"{black-bg}{bold} "+title+" {/bold}{/black-bg}",content:typeof content!="undefined"?"\n"+content:"",tags:true,draggable:true,border:"line",style:{fg:"#ffffff",bg:"black",border:{fg:"yellow",bg:"black"}}});UI.edit.box=["alertOK"];UI.edit["alertOK"]=UI.buttonfunc.make("alertOK",UI.modal.alert,"center",-1,typeof button=="undefined"?lang.buttonOK:button,"blue");UI.edit["alertOK"].on("press",function(){UI.modal.alert.destroy();if(modalactive){UI.modal.box.show()}else{UI.modal.hide()}UI.buttonfunc.init();screen.render()});UI.buttonfunc.init({box:["alertOK"]},[1,1]);UI.activated=UI.modal.alert;setTimeout(function(){UI.edit["alertOK"].focus();screen.render()},250)}function makeInput(name,left,top,width){UI.edit[name]=blessed.textbox({parent:UI.modal.box,mouse:true,top:top,left:left,width:width,height:1,align:"left",style:{fg:"black",bg:"white"}});UI.edit[name].on("focus",function(){UI.edit[name].readInput()});UI.edit[name].key(["down","enter","C-s"],function(ch,key){UI.edit.focus=UI.edit.focus+UI.edit.cfast;if(UI.edit.focus>UI.edit.cycle.length-1){UI.edit.focus=UI.edit.focus-UI.edit.cycle.length}if(UI.edit.focus<0){UI.edit.focus=UI.edit.cycle.length-UI.edit.cfast}if(typeof UI.edit.cycle[UI.edit.focus]!="undefined"){UI.edit[UI.edit.cycle[UI.edit.focus]].focus()}screen.render()});UI.edit[name].key(["up","escape","C-w"],function(ch,key){UI.edit.focus=UI.edit.focus-UI.edit.cfast;if(UI.edit.focus<0){UI.edit.focus=UI.edit.focus+UI.edit.cycle.length}if(UI.edit.focus>UI.edit.cycle.length-1){UI.edit.focus=UI.edit.focus-UI.edit.cycle.length}if(typeof UI.edit.cycle[UI.edit.focus]!="undefined"){UI.edit[UI.edit.cycle[UI.edit.focus]].focus()}screen.render()})}function makeModal(title,content){UI.box.setScrollPerc(0);UI.modal.isvisible=true;UI.modal.show();UI.modal.setFront();UI.modal.box=blessed.box({parent:UI.modal,top:"center",left:"center",width:(screen.width<60?"100":"70")+"%",height:screen.height<24?"100%":"89%",padding:{left:1,right:1},label:"{black-bg}{bold} "+title+" {/bold}{/black-bg}",align:"center",content:typeof content!="undefined"?content:"",tags:true,keys:false,vi:false,mouse:true,draggable:false,border:"line",style:{fg:"#ffffff",bg:"black",border:{fg:"#ffffff",bg:"black"}}});UI.activated=UI.modal.box;UI.activated.focus()}function destroyModal(){UI.modal.box.destroy();UI.modal.hide();UI.modal.isvisible=false;UI.buttonfunc.init();screen.render()}
